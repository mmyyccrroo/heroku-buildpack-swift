#!/usr/bin/env bash

echo "-----> Checkinig if there is any pre-compile hook"
if [ -f bin/pre_compile ]; then
  echo "-----> Running pre-compile hook"
  chmod +x bin/pre_compile
  ./bin/pre_compile
else
	echo "-----> No pre-compile hooks found"
fi

# echo "-----> Installign uuid-dev"
# apt-get install uuid-dev

# echo "-----> Installing libmongoc-dev"
# apt-get install libmongoc-dev


echo "------> Install system level dependencies"
APT_CACHE_DIR="$CACHE_DIR/apt/cache"
APT_STATE_DIR="$CACHE_DIR/apt/state"
mkdir -p "$APT_CACHE_DIR/archives/partial"
mkdir -p "$APT_STATE_DIR/lists/partial"
APT_OPTIONS="-o debug::nolocking=true -o dir::cache=$APT_CACHE_DIR -o dir::state=$APT_STATE_DIR"
apt-get $APT_OPTIONS update
apt-get $APT_OPTIONS -y --force-yes -d install --reinstall libblocksruntime-dev libkqueue0 libcurl3 openssl libssl-dev | indent
status "Downloaded DEB files..."
